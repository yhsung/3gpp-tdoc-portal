# Output Files Guide

[← Back to Usage](../README.md#-usage)

## Overview

This guide explains the structure, format, and usage of output files generated by the 3GPP TDoc Portal pipeline.

## Output Directory Structure

```
artifacts/output/
├── html/                           # HTML converted documents
│   ├── R1-2508300_proposal.html
│   ├── R1-2508300_presentation.html
│   ├── R1-2508301_agenda.html
│   └── ...
└── markdown/                       # Markdown converted documents
    ├── R1-2508300_proposal.md
    ├── R1-2508300_presentation.md
    ├── R1-2508301_agenda.md
    └── ...
```

## File Naming Convention

### Pattern

All output files follow this naming pattern:

```
{TDoc-ID}_{original-filename}.{extension}
```

### Components

**TDoc-ID:**
- Format: `R1-XXXXXXX` (R1 + 7 digits)
- Example: `R1-2508300`
- Extracted from original ZIP filename

**Original Filename:**
- Base name from source document
- Extension removed
- Spaces replaced with underscores (in some cases)
- Example: `proposal`, `meeting_notes`, `draft_agenda`

**Extension:**
- `.html` for HTML output
- `.md` for Markdown output

### Examples

| Original File | TDoc ID | HTML Output | Markdown Output |
|---------------|---------|-------------|-----------------|
| `proposal.docx` | R1-2508300 | `R1-2508300_proposal.html` | `R1-2508300_proposal.md` |
| `draft agenda.pptx` | R1-2508301 | `R1-2508301_draft_agenda.html` | `R1-2508301_draft_agenda.md` |
| `meeting notes.pdf` | R1-2508302 | `R1-2508302_meeting_notes.html` | `R1-2508302_meeting_notes.md` |
| `analysis.xlsx` | R1-2508303 | `R1-2508303_analysis.html` | `R1-2508303_analysis.md` |

## HTML Output Format

### Purpose

HTML output preserves document layout and formatting for viewing in web browsers.

### Features

- **Layout Preservation**: Tables, images, formatting preserved
- **Styling**: CSS inline styling for consistent display
- **Images**: Embedded or linked images
- **Tables**: HTML table structure maintained
- **Formatting**: Bold, italic, colors preserved

### Viewing HTML Files

**macOS:**
```bash
# Open in default browser
open artifacts/output/html/R1-2508300_proposal.html

# Open in specific browser
open -a "Google Chrome" artifacts/output/html/R1-2508300_proposal.html
```

**Linux:**
```bash
# Open in default browser
xdg-open artifacts/output/html/R1-2508300_proposal.html

# Or use browser directly
firefox artifacts/output/html/R1-2508300_proposal.html
```

**Windows:**
```cmd
# Open in default browser
start artifacts/output/html/R1-2508300_proposal.html
```

### HTML Structure Example

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>R1-2508300 Proposal</title>
    <style>
        /* Inline CSS for formatting */
        body { font-family: Arial, sans-serif; }
        table { border-collapse: collapse; }
        td, th { border: 1px solid #ddd; padding: 8px; }
    </style>
</head>
<body>
    <h1>Proposal Title</h1>
    <p>Document content...</p>
    <table>
        <!-- Table data -->
    </table>
</body>
</html>
```

### Use Cases for HTML

- **Viewing in Browser**: Easy visual review of documents
- **Web Integration**: Embed in web applications
- **Archiving**: Preserve original layout
- **Sharing**: Send to users for viewing (no special software needed)
- **Printing**: Print from browser with preserved formatting

## Markdown Output Format

### Purpose

Markdown output provides plain text format for easy parsing, searching, and text processing.

### Features

- **Plain Text**: Human-readable text format
- **Structure**: Headings, lists, tables preserved
- **Lightweight**: Small file size
- **Portable**: Works with any text editor
- **Version Control Friendly**: Git diffs work well

### Viewing Markdown Files

**Terminal:**
```bash
# View in terminal
cat artifacts/output/markdown/R1-2508300_proposal.md

# Page through with less
less artifacts/output/markdown/R1-2508300_proposal.md
```

**Text Editors:**
```bash
# VSCode
code artifacts/output/markdown/R1-2508300_proposal.md

# Vim
vim artifacts/output/markdown/R1-2508300_proposal.md

# Nano
nano artifacts/output/markdown/R1-2508300_proposal.md
```

**Markdown Viewers:**
- [Typora](https://typora.io/)
- [MacDown](https://macdown.uranusjr.com/) (macOS)
- [MarkText](https://marktext.app/)
- VSCode with Markdown Preview

### Markdown Structure Example

```markdown
# Proposal Title

## Introduction

This is the introduction paragraph with **bold** and *italic* text.

## Technical Details

### Subsection

- Bullet point 1
- Bullet point 2
- Bullet point 3

### Table

| Column 1 | Column 2 | Column 3 |
|----------|----------|----------|
| Data 1   | Data 2   | Data 3   |
| Data 4   | Data 5   | Data 6   |

## Conclusion

Final thoughts and recommendations.
```

### Use Cases for Markdown

- **Text Search**: Grep through documents easily
- **Data Extraction**: Parse with scripts
- **Documentation**: Include in documentation systems
- **Analysis**: Process with NLP tools
- **Version Control**: Track changes with git
- **Conversion**: Convert to other formats (PDF, HTML, etc.)

## File Statistics

### Typical File Sizes

**HTML Files:**
- **Simple document**: 10-50 KB
- **Document with images**: 100-500 KB
- **Complex presentation**: 500 KB - 2 MB
- **Large spreadsheet**: 200 KB - 1 MB

**Markdown Files:**
- **Simple document**: 5-20 KB
- **Complex document**: 20-100 KB
- **Large document**: 100-500 KB

**Comparison:**
- Markdown typically 50-70% smaller than HTML
- Both significantly smaller than original formats

### Total Storage

For ~3257 documents:

```
artifacts/output/
├── html/      ~2-3 GB
└── markdown/  ~1-2 GB
Total: ~3-6 GB
```

## Searching Output Files

### Search HTML Files

**macOS/Linux:**
```bash
# Search for text in HTML files
grep -r "search term" artifacts/output/html/

# Search with line numbers
grep -rn "search term" artifacts/output/html/

# Case-insensitive search
grep -ri "search term" artifacts/output/html/
```

### Search Markdown Files

**Search for specific text:**
```bash
# Simple search
grep -r "5G NR" artifacts/output/markdown/

# Show context (3 lines before and after)
grep -r -C 3 "5G NR" artifacts/output/markdown/

# List files containing text
grep -rl "5G NR" artifacts/output/markdown/
```

**Search with advanced patterns:**
```bash
# Regular expression search
grep -rE "R[1-3]-\d{7}" artifacts/output/markdown/

# Multiple terms (OR)
grep -rE "5G NR|LTE|6G" artifacts/output/markdown/
```

### Find Specific Files

**By TDoc ID:**
```bash
# Find all files from specific TDoc
ls artifacts/output/html/R1-2508300_*
ls artifacts/output/markdown/R1-2508300_*
```

**By filename pattern:**
```bash
# Find all proposals
ls artifacts/output/html/*proposal*
ls artifacts/output/markdown/*proposal*

# Find all presentations
ls artifacts/output/html/*presentation*
```

## Converting Output Files

### Markdown to Other Formats

**Using Pandoc:**

```bash
# Install pandoc
brew install pandoc  # macOS
sudo apt-get install pandoc  # Ubuntu

# Convert Markdown to PDF
pandoc artifacts/output/markdown/R1-2508300_proposal.md -o output.pdf

# Convert Markdown to DOCX
pandoc artifacts/output/markdown/R1-2508300_proposal.md -o output.docx

# Convert Markdown to HTML (custom)
pandoc artifacts/output/markdown/R1-2508300_proposal.md -o output.html
```

### HTML to PDF

**Using wkhtmltopdf:**

```bash
# Install wkhtmltopdf
brew install wkhtmltopdf  # macOS
sudo apt-get install wkhtmltopdf  # Ubuntu

# Convert HTML to PDF
wkhtmltopdf artifacts/output/html/R1-2508300_proposal.html output.pdf
```

**Using headless Chrome:**

```bash
# macOS/Linux
google-chrome --headless --print-to-pdf=output.pdf artifacts/output/html/R1-2508300_proposal.html
```

## Programmatic Access

### Reading HTML Files

**Python:**
```python
from bs4 import BeautifulSoup

# Read HTML file
with open('artifacts/output/html/R1-2508300_proposal.html', 'r', encoding='utf-8') as f:
    html_content = f.read()

# Parse HTML
soup = BeautifulSoup(html_content, 'html.parser')

# Extract text
text = soup.get_text()

# Find tables
tables = soup.find_all('table')
```

### Reading Markdown Files

**Python:**
```python
import markdown

# Read Markdown file
with open('artifacts/output/markdown/R1-2508300_proposal.md', 'r', encoding='utf-8') as f:
    md_content = f.read()

# Convert to HTML
html = markdown.markdown(md_content)

# Or just work with plain text
lines = md_content.split('\n')
```

### Batch Processing

**Process all Markdown files:**
```python
import os
import glob

# Find all Markdown files
md_files = glob.glob('artifacts/output/markdown/*.md')

# Process each file
for md_file in md_files:
    with open(md_file, 'r', encoding='utf-8') as f:
        content = f.read()
        # Process content
        print(f"Processing {md_file}")
```

## Organizing Output Files

### By TDoc ID

```bash
# Create directory for specific TDoc
mkdir -p organized/R1-2508300

# Copy files
cp artifacts/output/html/R1-2508300_* organized/R1-2508300/
cp artifacts/output/markdown/R1-2508300_* organized/R1-2508300/
```

### By File Type

```bash
# Create directories by document type
mkdir -p organized/{proposals,presentations,agendas}

# Move proposals
cp artifacts/output/html/*proposal* organized/proposals/

# Move presentations
cp artifacts/output/html/*presentation* organized/presentations/
```

## Quality Considerations

### Conversion Accuracy

**High Quality (90-100%):**
- Plain text documents
- Simple formatted documents
- PDF files with text

**Medium Quality (70-90%):**
- Documents with tables
- Presentations with basic layouts
- Spreadsheets

**Lower Quality (50-70%):**
- Complex layouts
- Documents with special fonts
- Files with embedded objects
- Password-protected files

### Known Limitations

1. **Complex Formatting**: May not preserve all formatting
2. **Embedded Objects**: Some embedded objects may not convert
3. **Macros**: Excel/Word macros are not preserved
4. **Fonts**: Custom fonts may fall back to defaults
5. **Images**: Image quality depends on source

### Improving Quality

**Install LibreOffice:**
```bash
# macOS
brew install --cask libreoffice

# Ubuntu/Debian
sudo apt-get install libreoffice
```

LibreOffice improves conversion quality for Office documents.

---

**Navigation:**
- [← Running Pipeline](running-pipeline.md)
- [Documentation Home](../README.md)
- [Usage Overview](../README.md#usage)

**Related:**
- [Artifacts Guide](../architecture/artifacts.md)
- [Quick Start](quick-start.md)
- [Features Overview](../features/)
